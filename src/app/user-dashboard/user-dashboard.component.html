<div class="container-fluid pt-5">
    <div class="row">
        <div class="col-md-6 mx-auto mt-4">
            <mat-card >
            <div class="d-flex justify-content-center mt-5">
                <img src={{currentUserDetails?.image}} alt="Photo of a Shiba Inu" class="img-fluid" height="200"  style="border-radius: 52px;">
            </div>
                <mat-card-content>
                    <div class="row mt-5">
                        <div class="col-md-9 ms-auto">
                            <p class="ms-2 fs-5">
                                Name : <span class="fw-bold fs-5">{{currentUserDetails?.name}}</span>
                              </p>
                        </div>
                        <div class="col-md-9 ms-auto">
                            <div class="row">
                                <div class="col-md-6">
                                    <p class="ms-2 fs-5">
                                        Age : <span class="fw-bold fs-5">{{currentUserDetails?.age}}</span>
                                      </p>
                                </div>
                                <div class="col-md-6 ">
                                    <p class="ms-2 fs-5">
                                        Gender : <span class="fw-bold fs-5">{{currentUserDetails?.gender}}</span>
                                      </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-9 ms-auto">
                            <p class="ms-2 fs-5">
                                Number : <span class="fw-bold fs-5">{{currentUserDetails?.number}}</span>
                            </p>
                        </div>
                        <div class="col-md-9 ms-auto">
                            <p class="ms-2 fs-5">
                                E-Mail : <span class="fw-bold fs-5">{{currentUserDetails?.email}}</span>
                              </p>
                        </div>
                    </div>
                </mat-card-content>
                <div class="mt-3 mb-3">
                <button mat-raised-button color="warn" class="float-end me-3" (click)="accountEdit(editForm)">Edit Details</button>
            </div>
              </mat-card>
        </div>
    </div>
</div>

<ng-template #editForm style="width: 1000px;">
<div class="container">
    <div class="row">
    <div class="col-10 mx-auto">
        <form [formGroup]="registerationForm">
            <div class="row mt-4">
                <div class="col-8 mx-auto">
                    <mat-form-field appearance="outline" class="w-100" [hideRequiredMarker]="true">
                        <mat-label for="name" class="form-label">Name</mat-label>
                        <input
                          matInput
                          type="text"
                          #input
                          formControlName="name"
                        />
                        <mat-error
                          class="text-danger ms-2"
                          *ngIf="registerationForm.get('name')?.hasError('required')"
                        >
                          *Required field</mat-error
                        >
                      </mat-form-field>
                </div>
                <div class="col-2 p-0 position-relative">
                  <img class="position-absolute" src={{currentUserDetails?.image}} alt="user profile" style="height: 50px;border-radius: 19px;">
                  <input class="position-absolute" matTooltip="Upload Image" type="file" id="file" title="&nbsp;" formControlName="image" accept="image/*" (change)="preview($event)" />
                  <br>
                  <sup class="text-danger" *ngIf=" registerationForm.get('image')?.invalid && registerationForm.get('image')?.touched">*Image required</sup>
                </div>
                <div class="col-10 mx-auto">
                    <mat-form-field appearance="outline" class="w-100" [hideRequiredMarker]="true">
                        <mat-label for="email" class="form-label">Email</mat-label>
                        <input
                          matInput
                          type="email"
                          #input
                          formControlName="email"
                        />
                        <mat-error
                          class="text-danger ms-2"
                          *ngIf="registerationForm.get('email')?.hasError('required')"
                        >
                          *Required field</mat-error
                        >
                      </mat-form-field>
                </div>
                <div class="col-3 ms-auto">
                    <mat-form-field appearance="outline" class="w-100" [hideRequiredMarker]="true">
                        <mat-label >Age</mat-label>
                        <input
                          matInput
                          type="text" 
                          maxlength="2"
                          formControlName="age"
                        />
                        <mat-error
                          class="text-danger ms-2"
                          *ngIf="registerationForm.get('age')?.hasError('required')"
                        >
                          *Required field</mat-error
                        >
                        <mat-error
                          class="text-danger ms-2"
                          *ngIf="registerationForm.get('age')?.hasError('pattern')"
                        >
                          *Please Enter Number Only</mat-error
                        >
                        <mat-error
                          class="text-danger ms-2"
                          *ngIf="registerationForm.get('age')?.hasError('maxlength')"
                        >
                          *Maxmum 2 digits</mat-error
                        >
                      </mat-form-field>
                </div>
                <div class="col-6 mx-auto ">
                    <mat-radio-group formControlName="gender">
                        <mat-radio-button name="gender" value="male">Male</mat-radio-button>
                        <mat-radio-button name="gender" value="female">Female</mat-radio-button>
                        <mat-radio-button name="gender" value="others">Others</mat-radio-button>
                      </mat-radio-group>    
                </div>
                <div class="col-10 mx-auto">
                    <mat-form-field appearance="outline" class="w-100" [hideRequiredMarker]="true">
                        <mat-label>Number</mat-label>
                        <span matPrefix class="ms-3" > +91 &nbsp;</span>
                        <input
                          matInput
                          type="text"
                          formControlName="number"
                        />
                        <mat-error
                          class="text-danger ms-2"
                          *ngIf="registerationForm.get('number')?.hasError('required')"
                        >
                          *Required field</mat-error
                        >
                        <mat-error
                          class="text-danger ms-2"
                          *ngIf="registerationForm.get('number')?.hasError('pattern')"
                        >
                          *Please Enter Numbers Only</mat-error
                        >
                        <mat-error
                          class="text-danger ms-2"
                          *ngIf="registerationForm.get('number')?.hasError('minlength')"
                        >
                          *Minimum 10 digits</mat-error
                        >
                        <mat-error
                          class="text-danger ms-2"
                          *ngIf="registerationForm.get('number')?.hasError('maxlength')"
                        >
                          *Maxmum 10 digits</mat-error
                        >
                      </mat-form-field>
                </div>
                <div class="col-10 mx-auto">
                    <mat-form-field appearance="outline" class="w-100" [hideRequiredMarker]="true">
                        <mat-label  class="form-label">Create Password</mat-label>
                        <input
                          matInput
                          type="password"
                          formControlName="password"
                        />
                        <mat-error
                          class="text-danger ms-2"
                          *ngIf="registerationForm.get('password')?.hasError('required')"
                        >
                          *Required field</mat-error
                        >
                      </mat-form-field>
                </div>
                <div class="col-10 mx-auto">
                    <mat-form-field appearance="outline" class="w-100" [hideRequiredMarker]="true">
                        <mat-label class="form-label">Confirm Password</mat-label>
                        <input
                          matInput
                          type="password"
                          formControlName="confirm_password"
                        />
                        <mat-error
                          class="text-danger ms-2"
                          *ngIf="registerationForm.get('confirm_password')?.hasError('required') "
                        >
                          *Required field</mat-error>
                          <mat-error
                          class="text-danger ms-2"
                          *ngIf="registerationForm.get('confirm_password')?.value != registerationForm.get('password')?.value"
                        >
                          *Password Missmatching</mat-error>
                      </mat-form-field>
                </div>
                <div class="col-10 mx-auto ">
                    <sup class="text-danger" *ngIf="
                    !(
                        registerationForm.get('password')?.value ==
                        registerationForm.get('confirm_password')?.value
                    ) &&
                    registerationForm.get('password')?.value != '' &&
                    registerationForm.get('confirm_password')?.value != ''
                  ">*PassWord & Confirm Password doesn't match</sup>
                </div>
                <div class="col-10 mx-auto">
                  <button mat-raised-button color="primary" class="float-end mb-3"  [disabled]="
                  registerationForm.invalid ||!(registerationForm.get('password')?.value ==registerationForm.get('confirm_password')?.value)"
                      (click)="UpdateDetails()">Update Details</button>
                </div>
            </div>
            </form>
    </div>
</div>
</div>
</ng-template>